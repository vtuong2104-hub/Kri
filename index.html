<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SQUIRREL'S PAW - GAME UI</title>
    <link href="https://fonts.googleapis.com/css2?family=Paytone+One&family=Lexend+Deca:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff85a2;
            --success-color: #77dd77;
            --error-color: #ff6961;
            --bg-overlay: rgba(255, 255, 255, 0.2);
            --sync-color: #4cc9f0;
            --radius: 15px; /* Bo góc 15px toàn bộ */
        }

        /* Nền cố định chống nhảy khi mở bàn phím */
        .bg-fixed {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('https://i.supaimg.com/87d30b37-99f0-4392-a4fa-d24c88d713e2.jpg') no-repeat center center;
            background-size: cover;
            z-index: -1;
        }

        body {
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh;
            font-family: 'Lexend Deca', sans-serif;
            overflow-x: hidden;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        #loading-screen::before {
            content: "";
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://i.supaimg.com/87d30b37-99f0-4392-a4fa-d24c88d713e2.jpg') no-repeat center center;
            background-size: cover;
            filter: blur(15px) brightness(0.7);
            transform: scale(1.1);
            z-index: -1;
        }

        .loader-bar {
            width: 250px; height: 12px;
            background: rgba(255,255,255,0.2);
            border: 2px solid #fff; border-radius: var(--radius);
            overflow: hidden; margin-top: 20px;
        }
        .loader-fill {
            width: 0%; height: 100%;
            background: var(--sync-color);
            transition: width 0.3s;
        }
        .loading-text { color: #fff; font-family: 'Paytone One', sans-serif; font-size: 24px; }

        /* THANH NHẬP LIỆU - ĐÃ KÉO DÀI 2 BÊN */
        .input-section {
            margin-top: 30px; /* <--- ĐIỀU CHỈNH LÊN XUỐNG TẠI ĐÂY */
            display: flex; 
            gap: 10px;
            padding: 10px;
            background: var(--bg-overlay);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--radius);
            border: 2px solid rgba(255,255,255,0.3);
            z-index: 10;
            
            width: 90%;          /* Dài chiếm 90% màn hình */
            max-width: 500px;    /* Không quá dài trên máy tính */
            box-sizing: border-box;
        }

        input {
            border: none; 
            padding: 12px 15px; 
            border-radius: var(--radius);
            outline: none; 
            font-size: 16px; 
            flex: 1;             /* Tự động kéo dài ô nhập lấp đầy thanh */
            background: rgba(255,255,255,0.9);
        }

        button {
            background: var(--primary-color);
            color: white; border: none; padding: 10px 20px;
            border-radius: var(--radius); font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 0 #d66580;
            white-space: nowrap; /* Không cho chữ nút bị xuống dòng */
        }
        button:active { transform: translateY(3px); box-shadow: 0 1px 0 #d66580; }

        /* Khung hiển thị ảnh */
        .image-display {
            margin-top: 30px;
            width: 90%; max-width: 500px;
            background: var(--bg-overlay);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 4px solid rgba(255,255,255,0.4);
            border-radius: var(--radius);
            padding: 10px;
            box-sizing: border-box;
            display: none;
            animation: popIn 0.5s ease;
        }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } }
        .image-display img {
            width: 100%; border-radius: 10px;
            display: block; pointer-events: none;
        }

        /* POPUP THÔNG BÁO NGANG */
        #popup {
            position: fixed;
            top: -100px; 
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 500px;
            padding: 15px 0;
            border-radius: var(--radius);
            color: white;
            font-weight: bold;
            text-align: center;
            transition: top 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2000;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        body { -webkit-user-select: none; user-select: none; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div class="bg-fixed"></div>

    <div id="loading-screen">
        <div class="loading-text">LOADING... <span id="percent">0%</span></div>
        <div class="loader-bar"><div class="loader-fill" id="fill"></div></div>
    </div>

    <div class="input-section">
        <input type="text" id="idInput" placeholder="Nhập mã...">
        <button onclick="checkCode()">XÁC NHẬN</button>
    </div>

    <div class="image-display" id="imgContainer">
        <div id="media-content"></div>
    </div>

    <div id="popup"></div>

    <script>
        // Tự động lấy ID từ Link
        window.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (id) document.getElementById('idInput').value = id;
        });

        // Xử lý Loading Screen
        window.addEventListener('load', () => {
            let width = 0;
            const fill = document.getElementById('fill');
            const percent = document.getElementById('percent');
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    const screen = document.getElementById('loading-screen');
                    screen.style.opacity = '0';
                    screen.style.transition = 'opacity 0.6s';
                    setTimeout(() => {
                        screen.style.display = 'none';
                        if(document.getElementById('idInput').value) checkCode();
                    }, 600);
                } else {
                    width += Math.floor(Math.random() * 25) + 5;
                    if(width > 100) width = 100;
                    fill.style.width = width + '%';
                    percent.innerText = width + '%';
                }
            }, 100);
        });

        function showPopup(msg, type) {
            const popup = document.getElementById('popup');
            popup.innerText = msg;
            popup.style.background = type === 'success' ? 'var(--success-color)' : 'var(--error-color)';
            popup.style.top = '20px';
            setTimeout(() => { popup.style.top = '-100px'; }, 3000);
        }

        function checkCode() {
            const val = document.getElementById('idInput').value.trim();
            const container = document.getElementById('imgContainer');
            const content = document.getElementById('media-content');

            if (!val) {
                showPopup("⚠️ Vui lòng nhập mã!", "error");
                return;
            }

            let imageUrl = val.includes('pbs.twimg.com') ? val : 
                           (val.length > 10 ? `https://pbs.twimg.com/media/${val}?format=jpg&name=orig` : "https://bom.so/" + val);

            const img = new Image();
            img.onload = function() {
                content.innerHTML = `<img src="${imageUrl}">`;
                container.style.display = 'block';
                showPopup("✅ Thành công! Đang tải ảnh...", "success");
            };
            img.onerror = function() {
                showPopup("❌ Mã không tồn tại!", "error");
                container.style.display = 'none';
            };
            img.src = imageUrl;
        }

        // Chống F12 và Copy
        document.onkeydown = (e) => {
            if (e.ctrlKey && ['u', 's', 'c', 'j'].includes(e.key.toLowerCase())) return false;
            if (e.keyCode === 123) return false;
        };
    </script>
</body>
</html>
